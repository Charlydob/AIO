<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover"/>
  <title>Vida • Temporizadores</title>
  <link rel="stylesheet" href="css/opal.css"/>
      <!-- 1) UID común (igual en todas las páginas) -->
  <script>window.FIXED_UID='charly';</script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-database-compat.js"></script>
  <script src="js/firebase-init.js"></script>
  <script src="js/utils.js"></script>
</head>
<body>
<div class="shell">
  <header class="app-bar">
    <div class="bar-start"><button class="icon-btn" onclick="history.back()">←</button></div>
    <h1>Temporizadores</h1>
    <div class="bar-end"><button class="pill" onclick="UI.showCreateTimer()">＋ Nuevo</button></div>
  </header>

  <main class="page">
    <!-- DASHBOARD DÍA (nuevo) -->
<section class="view active" id="timers-dashboard">
  <div class="sheet" id="dashWrap" style="margin-bottom:14px">
    <div class="row">
      <button class="icon-btn" id="prevDay">◀</button>
      <div class="grow" style="text-align:center">
        <div class="muted" style="font-size:12px">Día</div>
        <div id="dashDate" style="font-weight:700">—</div>
      </div>
      <button class="icon-btn" id="nextDay">▶</button>
    </div>
    <canvas id="dayPie" height="220"></canvas>
  </div>
</section>

    <!-- Lista -->
    <section id="timers-list-view" class="view active">
      <div id="timers-list" class="card-column"></div>
    </section>

    <!-- Crear -->
    <section id="timer-create-view" class="view">
      <div class="sheet">
        <h2>Nuevo temporizador</h2>
        <label class="field">
          <span>Nombre</span>
          <input id="newTimerName" placeholder="Ej. Vídeos YouTube"/>
        </label>
        <label class="field">
          <span>Color</span>
          <input id="newTimerColor" type="color" value="#3a86ff"/>
        </label>
        <div class="row">
          <button class="pill ghost" onclick="UI.backToList()">Cancelar</button>
          <div class="grow"></div>
          <button class="pill" onclick="UI.createTimer()">Crear</button>
        </div>
      </div>
    </section>

    <!-- Detalle -->
    <section id="timer-detail-view" class="view">
      <div class="sheet">
        <div class="row">
          <button class="pill ghost" onclick="UI.backToList()">← Volver</button>
          <div class="grow"></div>
          <button id="deleteTimerBtn" class="pill danger" onclick="UI.deleteCurrent()">Borrar</button>
        </div>
        <h2 id="dTitle">Título</h2>
        <p class="muted">Creado: <span id="dCreated"></span></p>

        <div class="timer-hero" id="dHero" style="--accent:#3a86ff">
          <div class="row">
            <div id="dRing" class="progress-ring" style="--p:0"><span id="dPct">0%</span></div>
            <div class="grow"></div>
          </div>
          <div id="liveCounter" style="margin:8px 0 12px">00:00:00</div>
          <div class="row">
            <button id="startBtn" class="pill" onclick="Timers.start()">Iniciar</button>
            <button id="stopBtn" class="pill warning" onclick="Timers.stop()" disabled>Parar</button>
            <div class="grow"></div>
            <div class="chip">Total: <span id="totalPretty">0h</span></div>
          </div>
        </div>

        <h3>Actividad diaria</h3>
<div class="card" id="activityCard" style="margin-top:12px">
  <div class="row" style="justify-content:space-between;align-items:center">
    <div class="tabs">
      <button class="tab active" id="tabBar"  onclick="setActivityMode('bar')">Barras</button>
      <button class="tab"        id="tabGrid" onclick="setActivityMode('grid')">Mosaico</button>
    </div>
  </div>
  <canvas id="dailyChart" height="200"></canvas>
  <canvas id="dailyHeat"  height="120" class="hidden"></canvas>
</div>

      </div>
    </section>
  </main>

  <nav class="bottom-nav">
    <a href="timers.html" class="active">Tempos</a>
    <a href="notas.html">Notas</a>
    <a href="finanzas.html">Finanzas</a>
  </nav>
</div>
<script src="js/timers.js"></script>
</body>
</html>
